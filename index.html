<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¬øQu√© suculenta necesitas?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-bg: #f3efe7;
      --main-color: #201b11;
      --accent: #b9da7b;
      --accent-dark: #495e22;
      --wood: #b18957;
      --leaf: #5c7e18;
      --rune: #2b230d;
      --soft: #f7f3e7;
      --border: #b6ac81;
      --shadow: 0 6px 28px 0 #9bcfbc22, 0 1px 6px #c8b79544;
      --radius: 25px;
      --glow: 0 0 15px #e7e9b6, 0 0 32px #f4ffd7;
      --transition: 0.18s cubic-bezier(.4,0,.2,1);
      --moss: #b5bb81;
      --rune-font: 'Marcellus', serif;
      --hobbit-shadow: 0 4px 30px #bdbb6e3a, 0 0 0 #fff0;
      --bg-wood: linear-gradient(180deg, #ede5c9 0 60%, #ecf2d6 100%);
      --bg-paper: linear-gradient(120deg, #f7f3e7 80%, #f1fbe7 100%);
      --bg-panel: linear-gradient(130deg, #f7f4df 85%, #e4e8c1 100%);
      --bg-soft: #f7f4e7;
      --bg-card: #fffef5;
    }
    html, body {
      background: radial-gradient(ellipse 180% 100% at 50% 5%, #fffbe4 50%, var(--main-bg) 100%);
      color: var(--main-color);
      font-family: var(--rune-font), 'Inter', 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100%;
      width: 100%;
      box-sizing: border-box;
    }
    body {
      min-height: 100vh;
      background-image:
        url('https://www.transparenttextures.com/patterns/wood-pattern.png'),
        var(--bg-wood);
      background-blend-mode: lighten;
      width: 100vw;
    }
    h1 {
      text-align: center;
      font-size: 2.4em;
      font-family: var(--rune-font), serif;
      font-weight: 800;
      margin-top: 34px;
      margin-bottom: 12px;
      letter-spacing: 0.06em;
      color: var(--rune);
      text-shadow: 0 0 11px #f7ffe3, 0 2px 5px #b3b05a2a;
      filter: drop-shadow(0 2px 0 #f6f5e0);
      background: var(--bg-paper);
      border-radius: 20px;
      max-width: 780px;
      margin-left: auto;
      margin-right: auto;
      padding: 18px 10px 8px 10px;
      box-shadow: 0 4px 22px #b9da7b22;
    }
    .main-flex {
      display: flex;
      justify-content: center;
      align-items: stretch;
      min-height: 0;
      gap: 0;
      max-width: 1320px;
      margin: 0 auto 40px auto;
      padding: 0 3vw;
      position: relative;
      background: var(--bg-wood);
      border-radius: 34px;
      box-shadow: 0 10px 60px #efecc633, 0 1px 8px #d1d7a5;
    }
    main.form-zone {
      background: var(--bg-paper);
      border-radius: 38px;
      box-shadow: 0 10px 60px #efecc633, 0 1px 8px #d1d7a5;
      padding: 37px 24px 25px 24px;
      border: 2.7px solid #e2d6b1;
      margin-bottom: 38px;
      min-width: 220px;
      max-width: 520px;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: stretch;
      z-index: 2;
      animation: floatin .3s;
      margin-left: 20px;
      margin-right: 20px;
      box-shadow: var(--shadow), var(--glow);
      position: relative;
      height: auto;
      min-height: 0;
      flex: 1 1 auto;
    }
    main.form-zone:before {
      content: '';
      position: absolute;
      left: 4%; right: 4%; top: 6px; bottom: 6px;
      border-radius: 40px;
      box-shadow: 0 0 40px 12px #f5ffde88, 0 0 120px 40px #efffb83c;
      z-index: 0;
      pointer-events: none;
      opacity: .9;
    }
    main.form-zone:hover {
      box-shadow: 0 18px 65px #e9efb245, 0 1px 13px #b3b05a33, var(--glow);
    }
    .side-gallery {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: stretch;
      height: auto;
      min-height: 0;
      flex: 1 0 auto;
      width: 190px;
      min-width: 85px;
      background: var(--bg-panel);
      border-radius: 32px;
      border: 2.8px solid #dfd9bb;
      box-shadow: var(--hobbit-shadow);
      gap: 11px;
      margin: 0;
      user-select: none;
      position: relative;
      z-index: 1;
      padding: 24px 6px 17px 6px;
      margin-top: 25px;
      margin-bottom: 25px;
    }
    .side-gallery-frames {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      height: 100%;
      min-height: 0;
      flex: 1 1 100%;
      width: 100%;
      gap: 12px;
    }
    .side-gallery .plant-img-frame {
      flex: 1 1 0;
      min-height: 0;
      width: 94%;
      aspect-ratio: 1/1;
      margin-bottom: 0;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      border-radius: 19px;
      box-shadow: 0 3px 18px #9cbf6820;
      background: var(--bg-soft);
      border: 1.2px solid #c5bc8e;
      cursor: pointer;
      transition: box-shadow .23s;
      overflow: hidden;
    }
    .side-gallery img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 17px;
      box-shadow: 0 1.5px 8px #8bc34a1e, 0 1px 5px #bbb2;
      filter: grayscale(0.04) brightness(1.07) contrast(1.03) blur(0.3px);
      background: #eaf6de;
      transition: box-shadow .23s, filter .21s, transform .16s;
      will-change: filter, box-shadow, transform;
    }
    .plant-caption {
      margin-top: 9px;
      margin-bottom: 5px;
      background: var(--bg-card);
      box-shadow: 0 2px 13px #eaeaa814;
      border-radius: 9px;
      padding: 7px 7px 6px 7px;
      text-align: center;
      min-width: 0;
      max-width: 160px;
      font-size: 1.03em;
      color: #2a2f16;
      font-family: var(--rune-font), serif;
      font-weight: 500;
      opacity: 0.96;
      user-select: text;
      pointer-events:none;
      border: 1.2px solid #ded9b6;
      letter-spacing: 0.03em;
    }
    .plant-caption .e {
      color: var(--leaf);
      font-size: 0.97em;
      font-weight: 700;
      letter-spacing: 0.01em;
      opacity: 0.92;
    }
    .plant-caption .s {
      color: #3a2b18;
      font-size: 0.95em;
      font-weight: 400;
      opacity: 0.82;
      display: block;
      margin-top: 1px;
      font-family: 'Inter', sans-serif;
    }
    form label {
      display: block;
      margin: 18px 0 6px 0;
      font-weight: 700;
      font-size: 1.12em;
      font-family: var(--rune-font), serif;
      color: #21210d;
      text-shadow: 0 1px 0 #fff, 0 0 3px #f8ffd0;
      letter-spacing: 0.04em;
      background: var(--bg-card);
      border-radius: 7px;
      padding: 5px 7px 2px 7px;
      margin-left: -7px;
      margin-right: -7px;
      margin-top: 18px;
    }
    form select,
    form button {
      width: 100%;
      font-size: 1em;
      padding: 12px 10px;
      border-radius: 12px;
      border: 1.5px solid #b6ac81;
      margin-bottom: 0;
      background: var(--bg-soft);
      transition: border-color var(--transition), box-shadow var(--transition);
      font-family: 'Inter',sans-serif;
      color: #191406;
    }
    form select:focus {
      border-color: var(--accent-dark);
      box-shadow: 0 2px 8px #b9da7b55;
      outline: none;
      background: #f4ffd6;
    }
    form button {
      margin-top: 24px;
      background: linear-gradient(90deg, #b9da7b 70%, #fffbe4 100%);
      color: #1b2b0c;
      font-weight: 800;
      letter-spacing: 0.09em;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 12px #b9da7b3a, 0 0 0 #fff;
      text-transform: uppercase;
      border-bottom: 3px solid var(--accent-dark);
      transition: transform 0.09s, background var(--transition);
      font-family: var(--rune-font), serif;
      font-size: 1.05em;
      border-radius: 14px;
      text-shadow: 0 0 6px #f6ffd6cc;
      background: var(--bg-panel);
    }
    form button:hover, form button:focus {
      background: linear-gradient(90deg, #d9fa8a 10%, #b9da7b 95%);
      transform: scale(1.027);
      border-bottom: 3px solid #b7e46a;
      box-shadow: 0 8px 28px #b9da7b36;
    }
    #resultado {
      margin: 38px auto 25px auto;
      max-width: 98vw;
      border-radius: var(--radius);
      box-shadow: 0 6px 35px #f6ffd633, 0 1px 8px #e6eac2;
      padding: 0;
      display: none;
      border: none;
      background: var(--bg-wood);
      z-index: 3;
      position: relative;
    }
    #resultado .big-img-plant {
      display: block;
      margin: 0 auto 21px auto;
      width: 340px;
      max-width: 92vw;
      max-height: 340px;
      aspect-ratio: 1/1;
      box-shadow: 0 6px 42px #e6f9b883, 0 1px 8px #b9da7b44, 0 0 30px #fffbe4a5;
      border-radius: 30px;
      background: #e0e9e2;
      transition: box-shadow var(--transition), transform var(--transition);
      object-fit: cover;
      border: 3px solid #e8e3bb;
      filter: drop-shadow(0 0 22px #fffbe4cc) brightness(1.07) contrast(1.09);
      outline: 6px solid #fafae0;
      outline-offset: -8px;
      animation: resultado-pop 0.45s cubic-bezier(.27,1.2,.44,1);
    }
    @keyframes resultado-pop {
      0% { opacity:0; transform: scale(0.7);}
      70% { opacity:1; transform: scale(1.08);}
      100% { opacity:1; transform: scale(1);}
    }
    #resultado .big-img-plant:hover {
      box-shadow: 0 10px 60px #e6f9b8a3, 0 4px 20px #e6eac2;
      transform: scale(1.04) rotate(-2.5deg);
      outline-color: #f6ffd6;
    }
    #resultado h2 {
      text-align: center;
      color: var(--accent-dark);
      font-family: var(--rune-font), serif;
      font-weight: 800;
      font-size: 1.34em;
      margin-top: 0;
      letter-spacing: 0.1em;
      margin-bottom: 0.9em;
      text-shadow: 0 0 8px #f6ffd6cc;
      background: var(--bg-paper);
      border-radius: 20px;
      max-width: 440px;
      margin-left: auto;
      margin-right: auto;
      padding: 14px 10px 6px 10px;
      box-shadow: 0 4px 22px #b9da7b22;
    }
    .respuestas {
      margin: 0 auto; max-width: 440px; text-align: center;
      font-size: 1.01em;
      color: #23220d;
      font-family: 'Inter',sans-serif;
      background: var(--bg-card);
      border-radius: 17px;
      padding: 12px 7px 7px 7px;
      box-shadow: 0 1px 6px #b9da7b22;
    }
    .respuestas ul {
      padding-left: 0;
      margin: 0;
      list-style: none;
      line-height: 1.5;
    }
    .respuestas li {
      margin-bottom: 4px;
      font-size: 1em;
      border-bottom: 1px dotted #e3e3e3;
      padding-bottom: 4px;
    }
    .conclusion {
      margin: 22px auto 0 auto;
      padding: 22px 4vw 22px 4vw;
      background: var(--bg-card);
      border-radius: 17px;
      font-size: 1.13em;
      color: #231f15;
      line-height: 1.65;
      box-shadow: 0 1px 9px #e0eac2;
      max-width: 97vw;
      font-family: var(--rune-font), serif;
      letter-spacing: 0.01em;
    }
    @media (max-width: 1200px) {
      .main-flex { max-width: 99vw;}
      .side-gallery { width: 100px;}
      main.form-zone { min-width: 0; }
    }
    @media (max-width: 900px) {
      .main-flex {
        flex-direction: column;
        align-items: center;
        max-width: 99vw;
        gap: 0;
        padding: 0 0;
      }
      .side-gallery {
        flex-direction: row;
        width: 100vw;
        max-width: 99vw;
        justify-content: center;
        margin: 0 0 13px 0;
        gap: 8px;
        padding: 10px 0 8px 0;
        border-radius: 20px;
        height: auto;
        max-height: none;
      }
      .side-gallery-frames {
        flex-direction: row;
        gap: 6px;
        width: 100vw;
        justify-content: center;
        height: auto;
      }
      .side-gallery .plant-img-frame {
        width: 44px;
        min-width: 30px;
        border-radius: 9px;
      }
      .plant-caption { max-width: 100px; font-size: 0.83em; }
      main.form-zone { margin: 0 0 22px 0; padding: 13px 2vw 7px 2vw; min-width: 0; max-width: 99vw;}
    }
    @media (max-width: 600px) {
      #resultado .big-img-plant {
        width: 96vw;
        max-width: 99vw;
        max-height: 210px;
        border-radius: 13px;
        outline-width: 3px;
        margin-bottom: 13px;
      }
      .conclusion { padding: 6px 2vw 6px 2vw; font-size: 1em;}
    }
  </style>
</head>
<body>
  <h1>¬øQu√© suculenta necesitas?</h1>
  <div class="main-flex">
    <div class="side-gallery" id="side-gallery-left"></div>
    <main class="form-zone">
      <form id="form-suculenta" autocomplete="off">
        <label for="signo">¬øCu√°l es tu signo zodiacal?</label>
        <select id="signo" name="signo" required>
          <option value="">Selecciona tu signo</option>
          <option>Aries</option><option>Tauro</option><option>G√©minis</option>
          <option>C√°ncer</option><option>Leo</option><option>Virgo</option>
          <option>Libra</option><option>Escorpio</option><option>Sagitario</option>
          <option>Capricornio</option><option>Acuario</option><option>Piscis</option>
        </select>
        <label for="vida">¬øQu√© aspecto de tu vida te gustar√≠a potenciar o equilibrar?</label>
        <select id="vida" name="vida" required>
          <option value="">Selecciona una opci√≥n</option>
          <option>Amor</option><option>Salud</option><option>Dinero</option>
          <option>Familia</option><option>Trabajo</option><option>Creatividad</option>
          <option>Equilibrio emocional</option><option>Crecimiento espiritual</option><option>Otro</option>
        </select>
        <label for="elemento">¬øCon qu√© elemento te identificas m√°s?</label>
        <select id="elemento" name="elemento" required>
          <option value="">Selecciona un elemento</option>
          <option>Fuego</option><option>Tierra</option><option>Aire</option><option>Agua</option>
        </select>
        <label for="buscas">¬øQu√© buscas en una planta?</label>
        <select id="buscas" name="buscas" required>
          <option value="">Selecciona una opci√≥n</option>
          <option>Facilidad de cuidado</option><option>Floraci√≥n</option>
          <option>Color</option><option>Resistencia</option>
          <option>Forma</option><option>Propiedades energ√©ticas</option><option>Otra</option>
        </select>
        <label for="color">¬øQu√© color te atrae m√°s?</label>
        <select id="color" name="color" required>
          <option value="">Selecciona un color</option>
          <option>Verde</option><option>Rojo</option><option>Naranja</option>
          <option>Amarillo</option><option>Rosa</option><option>Violeta</option>
          <option>Azul</option><option>Blanco</option><option>Gris</option><option>Multicolor</option>
        </select>
        <label for="nivel">¬øPrefieres trabajar tu energ√≠a a nivel‚Ä¶?</label>
        <select id="nivel" name="nivel" required>
          <option value="">Selecciona un nivel</option>
          <option>F√≠sico</option><option>Mental</option>
          <option>Emocional</option><option>Espiritual</option>
          <option>Todos</option>
        </select>
        <button type="submit" id="submit-btn">
          üåø‚ú® Ver una suculenta para mi ‚ú®üå±
        </button>
      </form>
    </main>
    <div class="side-gallery" id="side-gallery-right"></div>
  </div>
  <div id="resultado"></div>
  <script>
    // Plantas y colores
    const plantas = [
      { key:"el_cactus_cacahuete", nombre: "El Cactus Cacahuete", archivo: "cactus-cacahuete", energia: "alegr√≠a, renovaci√≥n, vitalidad", short: "Cactus amigable, tallos finos y flores naranjas intensas.", descripcion: "Cactus peque√±o de tallos verdes cil√≠ndricos y flores naranja brillante. Se asocia con la alegr√≠a sencilla, la renovaci√≥n y la protecci√≥n sin agresi√≥n." },
      { key:"graptosedum_california_sunset", nombre: "Graptosedum 'California Sunset'", archivo: "graptosedum", energia: "transformaci√≥n, flexibilidad, belleza interior y exterior", short: "Rosetas que cambian de verde a naranja y rosa con el sol.", descripcion: "Suculenta de rosetas con hojas que pasan del verde al naranja y rosa seg√∫n la luz. Invita a aceptar el cambio y la belleza de los ciclos." },
      { key:"ojo_de_dragon", nombre: "Ojo de Drag√≥n", archivo: "huerniaojodedragon", energia: "protecci√≥n, intuici√≥n, percepci√≥n", short: "Flores ex√≥ticas y forma compacta; ideal para colecci√≥n.", descripcion: "Planta compacta con flores rojizas y pardas, de formas inusuales. Simboliza la protecci√≥n, la intuici√≥n y la percepci√≥n fina de lo invisible." },
      { key:"callisia_navicularis", nombre: "Callisia Navicularis", archivo: "callisianavicularis", energia: "resiliencia, protecci√≥n, equilibrio", short: "Hojas gruesas, verdes y p√∫rpuras, de crecimiento rastrero.", descripcion: "Rastrera, con hojas carnosas verdes y p√∫rpuras. Representa la resiliencia y el equilibrio entre luz y sombra." },
      { key:"cactus_coral", nombre: "\"Cactus Coral\" o \"Cactus Arroz\"", archivo: "cactuscoral-2", energia: "adaptabilidad, conexi√≥n, ligereza", short: "Tallos en forma de coral, colgante y muy resistente.", descripcion: "Cactus colgante, tallos ramificados verdes y puntas rojizas. Su energ√≠a es la adaptabilidad y la comunicaci√≥n entre generaciones." },
      { key:"madreperla", nombre: "Madreperla", archivo: "madreperla-2", energia: "belleza interior, protecci√≥n, suavidad", short: "Hojas gris-verde con tonos rosados, ideal para macetas colgantes.", descripcion: "Roseta con hojas grises, verdes y toques rosados. Es talism√°n de belleza interior y protecci√≥n suave." },
      { key:"mammillaria_vetula", nombre: "Mammillaria vetula", archivo: "mammillariavetula", energia: "protecci√≥n, suavidad, crecimiento interior", short: "Cactus peque√±o, peludo y f√°cil de cuidar.", descripcion: "Cactus peque√±o, cubierto de pelitos blancos y flores blanquecinas. Aporta protecci√≥n y crecimiento desde la discreci√≥n." },
      { key:"mammillaria_prolifera", nombre: "Mammillaria prolifera", archivo: "mammillariaprolifera", energia: "abundancia, multiplicidad, comunidad", short: "Forma grupos de bolitas; florece y crece en racimos.", descripcion: "Cactus de bolitas, florece en amarillo p√°lido. Simboliza la multiplicidad y la alegr√≠a compartida." },
      { key:"echeveria_elegans", nombre: "Echeveria elegans", archivo: "echeveria-elegans-2", energia: "armon√≠a, belleza, perfecci√≥n", short: "Roseta sim√©trica azulada, resistente y ornamental.", descripcion: "Roseta sim√©trica, azulada y gris. Emblema de armon√≠a y perfecci√≥n natural." },
      { key:"crassula_expansa_subsp_fragilis", nombre: "Crassula expansa subsp. fragilis", archivo: "crassulafragilis", energia: "delicadeza, adaptaci√≥n, flexibilidad", short: "Tallos finos y flexibles, hojas peque√±as y delicadas.", descripcion: "Suculenta de tallos finos, hojas verdes peque√±as. S√≠mbolo de flexibilidad y delicadeza como fuerza." },
      { key:"opuntia_monacantha_fma_variegada_monstruosa", nombre: "Opuntia monacantha fma. variegada monstruosa", archivo: "monstruosa", energia: "originalidad, fortaleza, sanaci√≥n", short: "Opuntia de formas √∫nicas, variegada y llamativa.", descripcion: "Opuntia de formas √∫nicas, manchas amarillas y verdes. Talism√°n de originalidad y sanaci√≥n." }
    ];
    const plantaColores = {
      "el_cactus_cacahuete": ["verde", "naranja"],
      "graptosedum_california_sunset": ["naranja", "rosa", "rojo"],
      "ojo_de_dragon": ["rojo", "marr√≥n", "verde"],
      "callisia_navicularis": ["verde", "p√∫rpura"],
      "cactus_coral": ["verde", "rojo"],
      "madreperla": ["gris", "rosa", "verde"],
      "mammillaria_vetula": ["blanco", "verde"],
      "mammillaria_prolifera": ["amarillo", "verde", "blanco"],
      "echeveria_elegans": ["azul", "verde", "gris"],
      "crassula_expansa_subsp_fragilis": ["verde"],
      "opuntia_monacantha_fma_variegada_monstruosa": ["amarillo", "verde", "blanco"]
    };

    // M√≠sticas y largas conclusiones
    function simbolismoPlantaLargo(key) {
      switch(key) {
        case "el_cactus_cacahuete": return `Esta suculenta encarna la alegr√≠a sencilla y la capacidad de florecer en los momentos menos esperados. Sus peque√±as flores naranjas y su forma amigable nos recuerdan que la renovaci√≥n es posible incluso en los escenarios m√°s secos. Protege con su presencia, pero sin ser agresiva: es el tipo de guardiana que atrae energ√≠a fresca y optimismo cada d√≠a. Si alguna vez sent√≠s el √°nimo bajo, mir√°la para recordar que la resiliencia tambi√©n puede ser dulce y luminosa.`;
        case "graptosedum_california_sunset": return `El graptosedum es un s√≠mbolo vivo de los cambios de ciclo, como un atardecer que muta de naranja a rosa y luego se apaga con suavidad. Su belleza est√° en no temerle a la transformaci√≥n: invita a dejar atr√°s lo viejo, abrazar lo nuevo y entender que los colores de la vida cambian seg√∫n la luz con la que los mires. Tenerla cerca ayuda a transitar mudanzas, cierres y nuevos comienzos con gracia y luz.`;
        case "ojo_de_dragon": return `El Ojo de Drag√≥n es la suculenta de los portales y las noches misteriosas. Sus flores ex√≥ticas parecen mirarte, como si custodiaran secretos antiguos. Si sent√≠s que te rodean energ√≠as densas, ella es aliada: protege, limpia y despierta intuiciones dormidas. Es ideal para quienes buscan percibir m√°s all√° de lo visible y animarse a transitar sus propios laberintos internos.`;
        case "callisia_navicularis": return `La callisia es la mensajera de la resiliencia y el abrazo entre lo claro y lo oscuro. Sus hojas p√∫rpuras y verdes representan la danza entre la luz y la sombra, y su crecimiento rastrero ense√±a que avanzar a veces es adaptarse y tomar caminos alternativos. Es una gran compa√±era para quienes est√°n en procesos de cambio o necesitan anclar el equilibrio en su vida cotidiana.`;
        case "cactus_coral": return `Esta suculenta trae la energ√≠a del agua y los corales antiguos, recordando que la vida es conexi√≥n y adaptabilidad. Sus tallos colgantes unen generaciones, historias y personas, y su vibraci√≥n ayuda a fluir, comunicarse y soltar cargas innecesarias. Cuando la vida se pone r√≠gida, mir√° sus formas para recordar la sabidur√≠a de cambiar y moverse con ligereza.`;
        case "madreperla": return `La madreperla te invita a mirar hacia adentro: su belleza suave y sus tonos perlados son como un espejo que revela tesoros internos. Es una planta que suaviza el ambiente, brinda protecci√≥n dulce y potencia la autocompasi√≥n. Si est√°s en un camino de autoaceptaci√≥n o necesitas sentirte m√°s contenida, su presencia ser√° b√°lsamo y amuleto.`;
        case "mammillaria_vetula": return `Esta peque√±a cactus, cubierta de suaves pelitos, ense√±a el valor del crecimiento silencioso y la protecci√≥n que no necesita mostrar espinas. Es discreta pero poderosa: ideal para quienes desean avanzar sin llamar la atenci√≥n, cultivando proyectos y sue√±os a su propio ritmo. Su energ√≠a favorece la intimidad, la reflexi√≥n y el florecimiento interior.`;
        case "mammillaria_prolifera": return `La mammillaria prolifera es s√≠mbolo de abundancia y comunidad. Sus bolitas se multiplican y florecen en racimos, trayendo alegr√≠a compartida. Tenerla cerca es una invitaci√≥n a abrirte a la prosperidad y a celebrar los peque√±os logros junto a quienes quer√©s. Es la suculenta de los lazos, la generosidad y la risa multiplicada.`;
        case "echeveria_elegans": return `Pocas suculentas transmiten tanta armon√≠a como la echeveria elegans. Sus hojas perfectamente dispuestas en roseta son un mantra visual para la paz y el equilibrio. Es ideal para espacios donde busques inspiraci√≥n, estudio o trabajo creativo, y su presencia ayuda a ordenar pensamientos y emociones como si cada hoja fuera un p√©talo de calma.`;
        case "crassula_expansa_subsp_fragilis": return `La crassula fragilis es la maestra de la flexibilidad. Sus tallos finos y hojas delicadas demuestran que la fortaleza no siempre es r√≠gida: la adaptabilidad tambi√©n es poder. Si est√°s en un momento de creatividad o necesitas encontrar soluciones diferentes, su energ√≠a abre caminos, sugiere alternativas y protege de las rigideces del pensamiento.`;
        case "opuntia_monacantha_fma_variegada_monstruosa": return `La opuntia monstruosa celebra la rareza, la diferencia y la capacidad de sanar heridas profundas. Sus formas √∫nicas y sus manchas coloridas son bandera de orgullo para quienes se sienten fuera de lo com√∫n. Es una planta sanadora, que ayuda a integrar las cicatrices y a mostrar que lo inusual tambi√©n es bello y digno de asombro.`;
        default: return "";
      }
    }

    function colorSimbolismo(color) {
      switch(color.toLowerCase()) {
        case "verde": return "sanaci√≥n, crecimiento y conexi√≥n con la Tierra";
        case "naranja": return "creatividad, alegr√≠a y fuerza vital";
        case "amarillo": return "claridad mental, optimismo y luz interior";
        case "rojo": return "pasi√≥n, protecci√≥n y coraje";
        case "rosa": return "autoestima, amor propio y dulzura";
        case "violeta": return "transformaci√≥n, purificaci√≥n y espiritualidad";
        case "azul": return "intuici√≥n, calma y apertura del pensamiento";
        case "blanco": return "pureza, nuevos comienzos y paz";
        case "gris": return "neutralidad, sabidur√≠a y flexibilidad";
        case "multicolor": return "integraci√≥n de todas las energ√≠as y alegr√≠a de vivir";
        default: return "energ√≠a natural y vitalidad";
      }
    }

    function propiedadMagica(key) {
      switch(key) {
        case "el_cactus_cacahuete": return "Colocada cerca de una ventana, atrae oportunidades y un √°nimo renovado cada ma√±ana.";
        case "graptosedum_california_sunset": return "Ideal para rituales de cierre de ciclos y nuevos comienzos, especialmente al atardecer.";
        case "ojo_de_dragon": return "Se dice que su presencia ahuyenta envidias y fortalece los sue√±os l√∫cidos.";
        case "callisia_navicularis": return "Ayuda a mantener la calma en cambios de estaci√≥n o mudanzas.";
        case "cactus_coral": return "Favorece la comunicaci√≥n en familia y el fluir de ideas nuevas.";
        case "madreperla": return "Potencia la autocompasi√≥n y es excelente para meditaciones cortas al despertar.";
        case "mammillaria_vetula": return "Protege los secretos y promueve el crecimiento de proyectos personales.";
        case "mammillaria_prolifera": return "Multiplica la prosperidad material y espiritual cuando se regala a alguien.";
        case "echeveria_elegans": return "Ideal para espacios de estudio o trabajo, equilibra la energ√≠a mental.";
        case "crassula_expansa_subsp_fragilis": return "Favorece la inspiraci√≥n art√≠stica y la resoluci√≥n pac√≠fica de conflictos.";
        case "opuntia_monacantha_fma_variegada_monstruosa": return "Ayuda a sanar heridas antiguas y a abrazar la propia rareza.";
        default: return "";
      }
    }

    function generarConclusion(respuestas, info, color) {
      let intro = `Has elegido el color <b>${color.charAt(0).toUpperCase()+color.slice(1)}</b>: una vibraci√≥n fundamental en la naturaleza y un puente entre tu mundo interior y el de las plantas.`;

      let colorTexto = "";
      if (plantaColores[info.key]?.includes(color.toLowerCase())) {
        let matchDesc = info.descripcion.match(/(flores|hojas|tallos)[^.]*/i);
        colorTexto = `Esta suculenta expresa ese color a trav√©s de ${matchDesc ? matchDesc[0].toLowerCase() : 'sus formas y matices'}, intensificando la resonancia con tu b√∫squeda.`;
      } else {
        colorTexto = `Aunque su tono principal no es exactamente ese, en el mundo vegetal el color <b>${color}</b> simboliza ${colorSimbolismo(color)}. Esta planta te conecta con esa energ√≠a de manera m√°s sutil.`;
      }

      let simbolismo = simbolismoPlantaLargo(info.key);
      let detalleMagico = propiedadMagica(info.key);

      return `
        <div style="margin-bottom:16px">${intro}</div>
        <div style="margin:8px 0 14px 0;">${colorTexto}</div>
        <div style="margin-bottom:12px">${simbolismo}</div>
        <div style="margin-bottom:10px"><b>Amuleto y uso m√°gico:</b> ${detalleMagico}</div>
        <div style="margin-top:12px;font-size:.99em;opacity:.90;">
          <i>Deja que la luz de la naturaleza y la tierra antigua te hablen a trav√©s de esta suculenta. No es solo decoraci√≥n: es gu√≠a y amuleto para tu sendero.</i>
        </div>
      `;
    }

    function validarEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
    }
    function buscarImagen(nombreBase, callback) {
      const exts = ["jpg", "jpeg", "png"];
      let idx = 0;
      function probar() {
        if (idx >= exts.length) {
          callback("fotos/no-disponible.png");
          return;
        }
        const ruta = `fotos/${nombreBase}.${exts[idx]}`;
        const img = new window.Image();
        img.onload = () => callback(ruta);
        img.onerror = () => { idx++; probar(); };
        img.src = ruta;
      }
      probar();
    }
    function renderGallery(containerId, indexes, isLeft) {
      const cont = document.getElementById(containerId);
      cont.innerHTML = '';
      const framesWrap = document.createElement('div');
      framesWrap.className = 'side-gallery-frames';
      indexes.forEach((idx, n) => {
        const val = plantas[idx];
        const frame = document.createElement('div');
        frame.className = 'plant-img-frame';
        buscarImagen(val.archivo, (ruta) => {
          frame.innerHTML = `
            <img src="${ruta}" alt="${val.nombre}" class="active">
          `;
        });
        const caption = document.createElement('div');
        caption.className = 'plant-caption';
        caption.innerHTML = `<span>${val.nombre}</span>
          <span class="e">${val.energia}</span>
          <span class="s">${val.short}</span>`;
        frame.appendChild(caption);
        framesWrap.appendChild(frame);
      });
      cont.appendChild(framesWrap);
    }
    // 6 im√°genes por lateral
    const leftIndexes = [0,1,2,3,4,5];
    const rightIndexes = [6,7,8,9,10,0];
    renderGallery('side-gallery-left', leftIndexes, true);
    renderGallery('side-gallery-right', rightIndexes, false);

    document.getElementById('form-suculenta').addEventListener('submit', function(e) {
      e.preventDefault();
      const fd = new FormData(this);
      const respuestas = [
        { titulo: "Signo zodiacal", valor: fd.get('signo') },
        { titulo: "Aspecto de la vida que te gustar√≠a potenciar o equilibrar", valor: fd.get('vida') },
        { titulo: "Elemento con el que te identific√°s m√°s", valor: fd.get('elemento') },
        { titulo: "¬øQu√© buscas en una planta?", valor: fd.get('buscas') },
        { titulo: "Color que m√°s te atrae", valor: fd.get('color') },
        { titulo: "Nivel para trabajar tu energ√≠a", valor: fd.get('nivel') }
      ];
      const color = fd.get('color');
      const keySug = (() => {
        colorLower = color?.toLowerCase();
        let candidatas = Object.entries(plantaColores)
          .filter(([k, arr]) => arr.includes(colorLower))
          .map(([k]) => k);
        if (candidatas.length) return candidatas[Math.floor(Math.random() * candidatas.length)];
        return Object.keys(plantaColores)[Math.floor(Math.random() * Object.keys(plantaColores).length)];
      })();
      const info = plantas.find(p=>p.key===keySug);
      buscarImagen(info.archivo, (rutaImagen) => {
        const cont = document.getElementById('resultado');
        const conclusion = generarConclusion(respuestas, info, color);
        cont.innerHTML = `
          <h2>${info.nombre}</h2>
          <img src="${rutaImagen}" alt="${info.nombre}" class="big-img-plant">
          <div class="respuestas">
            <h3>Tus respuestas:</h3>
            <ul>
              ${respuestas.map(r => `<li><b>${r.titulo}:</b> ${r.valor}</li>`).join('')}
            </ul>
          </div>
          <div class="conclusion">
            ${conclusion}
          </div>
          <form id="mail-form" style="display:flex;align-items:center;gap:10px;margin-top:32px;flex-wrap:wrap;">
            <input id="mail-to" type="email" name="email" placeholder="Escrib√≠ tu e-mail" style="flex:1 1 220px;font-size:1.08em;padding:10px 14px;border-radius:7px;border:1.5px solid #cfe5d3;outline:none;background:#f8f9fa;" required>
            <button id="send-mail-btn" title="Enviar por email" type="submit" style="background:linear-gradient(90deg,#69b47c 60%,#ffb3b3 100%);border:none;border-radius:50%;padding:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #e1b7b73d;" disabled>
              <svg viewBox="0 0 24 24" width="26" height="26" style="vertical-align:middle;" fill="#fff"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
          </form>
          <div id="mail-confirm" style="margin-top:10px;color:#3080b4;font-size:1.06em;font-weight:500;"></div>
        `;
        cont.style.display = 'block';
        cont.scrollIntoView({behavior: 'smooth'});
        // --- Formspree AJAX ---
        const mailInput = document.getElementById('mail-to');
        const sendBtn = document.getElementById('send-mail-btn');
        const mailForm = document.getElementById('mail-form');
        const mailConfirm = document.getElementById('mail-confirm');
        function updateBtnState() {
          if (validarEmail(mailInput.value)) {
            sendBtn.disabled = false;
            mailInput.style.borderColor = "#69b47c";
          } else {
            sendBtn.disabled = true;
            mailInput.style.borderColor = "#fbb3b3";
          }
          mailConfirm.textContent = "";
        }
        mailInput.addEventListener('input', updateBtnState);
        mailForm.onsubmit = function(ev) {
          ev.preventDefault();
          const to = mailInput.value.trim();
          if (!validarEmail(to)) {
            mailInput.style.borderColor = "#fbb3b3";
            mailConfirm.textContent = "Por favor, escrib√≠ un e-mail v√°lido.";
            return;
          }
          sendBtn.disabled = true;
          mailConfirm.style.color = "#3080b4";
          mailConfirm.textContent = "Enviando...";
          const textRespuestas = respuestas.map(r => `${r.titulo}: ${r.valor}`).join("\n");
          const conclusionText = conclusion.replace(/<[^>]+>/g, '').replace(/\s+\n/g, '\n');
          const mensaje =
            `Resultado de mi lectura personalizada:\n\n` +
            `Planta sugerida: ${info.nombre}\n${info.short}\n\n` +
            `Mis respuestas:\n${textRespuestas}\n\n` +
            `Lectura:\n${conclusionText}\n\n¬°Gracias!`;
          fetch("https://formspree.io/f/meokgbvo", {
            method: "POST",
            headers: { "Accept": "application/json", "Content-Type": "application/json" },
            body: JSON.stringify({ email: to, message: mensaje })
          })
          .then(response => response.json())
          .then(data => {
            if(data.ok || data.success || data["next"]){
              mailConfirm.style.color = "#2e8c57";
              mailConfirm.textContent = "¬°Enviado! Revis√° tu correo üòä";
              mailInput.value = "";
            } else {
              mailConfirm.style.color = "#e04b4b";
              mailConfirm.textContent = "Ocurri√≥ un error. Intent√° de nuevo m√°s tarde.";
            }
          }).catch(() => {
            mailConfirm.style.color = "#e04b4b";
            mailConfirm.textContent = "Ocurri√≥ un error. Intent√° de nuevo m√°s tarde.";
          }).finally(()=>{sendBtn.disabled=false;});
        };
        sendBtn.disabled = true;
      });
    });
  </script>
</body>
</html>