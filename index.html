<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¬øQu√© suculenta necesitas?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-bg: #f6f6f6;
      --main-color: #212529;
      --accent: #8bc34a;
      --soft: #fafbfb;
      --border: #e2e6ea;
      --shadow: 0 2px 16px 0 #0002;
      --radius: 18px;
      --transition: 0.16s cubic-bezier(.4,0,.2,1);
      --side-photo-width: 180px;
      --side-photo-gap: 32px;
    }
    html, body {
      background: var(--main-bg);
      color: var(--main-color);
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      font-size: 2.6em;
      font-weight: 700;
      margin: 32px 0 16px 0;
      letter-spacing: 0.5px;
    }
    .main-layout {
      display: flex;
      justify-content: center;
      align-items: stretch;
      gap: var(--side-photo-gap);
      max-width: 900px;
      margin: 0 auto 40px auto;
      padding: 0 8px;
    }
    .side-photo {
      width: var(--side-photo-width);
      min-width: 120px;
      max-width: 220px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      user-select: none;
      position: relative;
      z-index: 1;
    }
    .side-photo img {
      width: 100%;
      max-width: 200px;
      aspect-ratio: 1/1;
      object-fit: cover;
      border-radius: 22px;
      box-shadow: 0 4px 28px #8bc34a25, 0 1px 7px #bbb2;
      background: #e0e9e2;
      margin-bottom: 16px;
      transition: box-shadow 0.19s, transform 0.16s;
    }
    .side-photo .plant-name {
      font-weight: 700;
      color: #3b6e38;
      font-size: 1.08em;
      text-align: center;
      margin-bottom: 0;
      margin-top: 10px;
    }
    .side-photo .plant-energy {
      color: #7bbf2c;
      font-size: 0.97em;
      font-weight: 500;
      text-align: center;
      margin-bottom: 8px;
    }
    .side-photo .plant-short {
      font-size: 0.97em;
      color: #6e7d67;
      text-align: center;
      opacity: 0.77;
      max-width: 170px;
      margin-bottom: 0;
    }
    main.form-zone {
      background: var(--soft);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 30px 26px 18px 26px;
      border: 1.5px solid var(--border);
      margin-bottom: 38px;
      transition: box-shadow var(--transition);
      min-width: 320px;
      max-width: 440px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      z-index: 2;
    }
    main.form-zone:hover {
      box-shadow: 0 8px 32px #98d5872f;
    }
    form label {
      display: block;
      margin: 23px 0 6px 0;
      font-weight: 600;
      font-size: 1.08em;
    }
    form select,
    form button {
      width: 100%;
      font-size: 1.07em;
      padding: 13px 11px;
      border-radius: 10px;
      border: 1.5px solid var(--border);
      margin-bottom: 0;
      background: #fff;
      transition: border-color var(--transition), box-shadow var(--transition);
    }
    form select:focus {
      border-color: var(--accent);
      box-shadow: 0 2px 8px #8bc34a22;
      outline: none;
    }
    form button {
      margin-top: 22px;
      background: linear-gradient(90deg, #8bc34a 60%, #d4fc79 100%);
      color: #233;
      font-weight: 800;
      letter-spacing: 0.7px;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 12px #8bc34a33;
      text-transform: uppercase;
      border-bottom: 3px solid #6ea03c;
      transition: transform 0.09s, background var(--transition);
    }
    form button:hover, form button:focus {
      background: linear-gradient(90deg, #b7e46a 10%, #8bc34a 95%);
      transform: scale(1.025);
      border-bottom: 3px solid #b7e46a;
    }
    #resultado {
      margin: 45px auto 40px auto;
      max-width: 700px;
      border-radius: var(--radius);
      box-shadow: 0 6px 35px #8bc34a12;
      padding: 0;
      display: none;
      border: none;
      background: none;
      z-index: 3;
      position: relative;
    }
    #resultado .big-img-plant {
      display: block;
      margin: 0 auto 24px auto;
      max-width: 410px;
      max-height: 330px;
      width: 99vw;
      height: auto;
      box-shadow: 0 4px 38px #b7d6bc3c;
      border-radius: 25px;
      background: #e0e9e2;
      transition: box-shadow var(--transition), transform var(--transition);
      object-fit: cover;
    }
    #resultado .big-img-plant:hover {
      box-shadow: 0 10px 50px #b7d6bc55;
      transform: scale(1.05);
    }
    #resultado h2 {
      text-align: center;
      color: #8bc34a;
      font-weight: 800;
      font-size: 2em;
      margin-top: 0;
      letter-spacing: 0.2px;
      margin-bottom: 0.9em;
    }
    .respuestas {
      margin: 0 auto; max-width: 440px; text-align: center;
      font-size: 1.09em;
      color: #42743d;
    }
    .respuestas ul {
      padding-left: 0;
      margin: 0;
      list-style: none;
      line-height: 1.6;
    }
    .respuestas li {
      margin-bottom: 4px;
      font-size: 1em;
      border-bottom: 1px dotted #e3e3e3;
      padding-bottom: 4px;
    }
    .conclusion {
      margin: 38px auto 0 auto;
      padding: 30px 12vw 30px 12vw;
      background: #fff;
      border-radius: 25px;
      font-size: 1.13em;
      color: #594e2d;
      line-height: 1.62;
      box-shadow: 0 1px 9px #e2e2c241;
      max-width: 650px;
    }
    @media (max-width: 900px) {
      .main-layout {
        flex-direction: column;
        align-items: center;
        max-width: 99vw;
        gap: 0;
      }
      .side-photo {
        flex-direction: row;
        width: 100%;
        max-width: 98vw;
        justify-content: center;
        margin: 0 0 12px 0;
        gap: 14px;
      }
      .side-photo img {
        max-width: 110px;
        margin-bottom: 0;
        margin-right: 14px;
      }
      .side-photo .plant-name,
      .side-photo .plant-energy,
      .side-photo .plant-short {
        text-align: left;
        margin-bottom: 2px;
      }
    }
    @media (max-width: 600px) {
      .main-layout {
        padding: 0;
      }
      main.form-zone {
        padding: 12px 2vw 10px 2vw;
        min-width: 0;
        max-width: 99vw;
      }
      .side-photo img {
        max-width: 77px;
        border-radius: 1em;
      }
      .side-photo {
        max-width: 99vw;
        margin-bottom: 11px;
      }
    }
  </style>
</head>
<body>
  <h1>¬øQu√© suculenta necesitas?</h1>
  <div class="main-layout">
    <div class="side-photo" id="side-photo-left">
      <!-- Foto y descripci√≥n izquierda din√°mica -->
    </div>
    <main class="form-zone">
      <form id="form-suculenta" autocomplete="off">
        <label for="signo">¬øCu√°l es tu signo zodiacal?</label>
        <select id="signo" name="signo" required>
          <option value="">Selecciona tu signo</option>
          <option>Aries</option>
          <option>Tauro</option>
          <option>G√©minis</option>
          <option>C√°ncer</option>
          <option>Leo</option>
          <option>Virgo</option>
          <option>Libra</option>
          <option>Escorpio</option>
          <option>Sagitario</option>
          <option>Capricornio</option>
          <option>Acuario</option>
          <option>Piscis</option>
        </select>
        <label for="vida">¬øQu√© aspecto de tu vida te gustar√≠a potenciar o equilibrar?</label>
        <select id="vida" name="vida" required>
          <option value="">Selecciona una opci√≥n</option>
          <option>Amor</option>
          <option>Salud</option>
          <option>Dinero</option>
          <option>Familia</option>
          <option>Trabajo</option>
          <option>Creatividad</option>
          <option>Equilibrio emocional</option>
          <option>Crecimiento espiritual</option>
          <option>Otro</option>
        </select>
        <label for="elemento">¬øCon qu√© elemento te identificas m√°s?</label>
        <select id="elemento" name="elemento" required>
          <option value="">Selecciona un elemento</option>
          <option>Fuego</option>
          <option>Tierra</option>
          <option>Aire</option>
          <option>Agua</option>
        </select>
        <label for="buscas">¬øQu√© buscas en una planta?</label>
        <select id="buscas" name="buscas" required>
          <option value="">Selecciona una opci√≥n</option>
          <option>Facilidad de cuidado</option>
          <option>Floraci√≥n</option>
          <option>Color</option>
          <option>Resistencia</option>
          <option>Forma</option>
          <option>Propiedades energ√©ticas</option>
          <option>Otra</option>
        </select>
        <label for="color">¬øQu√© color te atrae m√°s?</label>
        <select id="color" name="color" required>
          <option value="">Selecciona un color</option>
          <option>Verde</option>
          <option>Rojo</option>
          <option>Naranja</option>
          <option>Amarillo</option>
          <option>Rosa</option>
          <option>Violeta</option>
          <option>Azul</option>
          <option>Blanco</option>
          <option>Gris</option>
          <option>Multicolor</option>
        </select>
        <label for="nivel">¬øPrefieres trabajar tu energ√≠a a nivel‚Ä¶?</label>
        <select id="nivel" name="nivel" required>
          <option value="">Selecciona un nivel</option>
          <option>F√≠sico</option>
          <option>Mental</option>
          <option>Emocional</option>
          <option>Espiritual</option>
          <option>Todos</option>
        </select>
        <button type="submit" id="submit-btn">
          üåà‚ú® Ver mi lectura personalizada ‚ú®üå±
        </button>
      </form>
    </main>
    <div class="side-photo" id="side-photo-right">
      <!-- Foto y descripci√≥n derecha din√°mica -->
    </div>
  </div>
  <div id="resultado"></div>
  <script>
    // Plantas con minidescripci√≥n corta
    const plantas = [
      { key:"el_cactus_cacahuete", nombre: "El Cactus Cacahuete", archivo: "cactus-cacahuete", energia: "alegr√≠a, renovaci√≥n, vitalidad", short: "Cactus amigable, tallos finos y flores naranjas intensas." },
      { key:"graptosedum_california_sunset", nombre: "Graptosedum 'California Sunset'", archivo: "graptosedum", energia: "transformaci√≥n, flexibilidad, belleza interior y exterior", short: "Rosetas que cambian de verde a naranja y rosa con el sol." },
      { key:"ojo_de_dragon", nombre: "Ojo de Drag√≥n", archivo: "huerniaojodedragon", energia: "protecci√≥n, intuici√≥n, percepci√≥n", short: "Flores ex√≥ticas y forma compacta; ideal para colecci√≥n." },
      { key:"callisia_navicularis", nombre: "Callisia Navicularis", archivo: "callisianavicularis", energia: "resiliencia, protecci√≥n, equilibrio", short: "Hojas gruesas, verdes y p√∫rpuras, de crecimiento rastrero." },
      { key:"cactus_coral", nombre: "\"Cactus Coral\" o \"Cactus Arroz\"", archivo: "cactuscoral-2", energia: "adaptabilidad, conexi√≥n, ligereza", short: "Tallos en forma de coral, colgante y muy resistente." },
      { key:"madreperla", nombre: "Madreperla", archivo: "madreperla-2", energia: "belleza interior, protecci√≥n, suavidad", short: "Hojas gris-verde con tonos rosados, ideal para macetas colgantes." },
      { key:"mammillaria_vetula", nombre: "Mammillaria vetula", archivo: "mammillariavetula", energia: "protecci√≥n, suavidad, crecimiento interior", short: "Cactus peque√±o, peludo y f√°cil de cuidar." },
      { key:"mammillaria_prolifera", nombre: "Mammillaria prolifera", archivo: "mammillariaprolifera", energia: "abundancia, multiplicidad, comunidad", short: "Forma grupos de bolitas; florece y crece en racimos." },
      { key:"echeveria_elegans", nombre: "Echeveria elegans", archivo: "echeveria-elegans-2", energia: "armon√≠a, belleza, perfecci√≥n", short: "Roseta sim√©trica azulada, resistente y ornamental." },
      { key:"crassula_expansa_subsp_fragilis", nombre: "Crassula expansa subsp. fragilis", archivo: "crassulafragilis", energia: "delicadeza, adaptaci√≥n, flexibilidad", short: "Tallos finos y flexibles, hojas peque√±as y delicadas." },
      { key:"opuntia_monacantha_fma_variegada_monstruosa", nombre: "Opuntia monacantha fma. variegada monstruosa", archivo: "monstruosa", energia: "originalidad, fortaleza, sanaci√≥n", short: "Opuntia de formas √∫nicas, variegada y llamativa." }
    ];

    // Imagen aleatoria para cada lado, cambiando cada X segundos
    let idxLeft = 0, idxRight = 1;
    function buscarImagen(nombreBase, callback) {
      const exts = ["jpg", "jpeg", "png"];
      let idx = 0;
      function probar() {
        if (idx >= exts.length) {
          callback("fotos/no-disponible.png");
          return;
        }
        const ruta = `fotos/${nombreBase}.${exts[idx]}`;
        const img = new window.Image();
        img.onload = () => callback(ruta);
        img.onerror = () => { idx++; probar(); };
        img.src = ruta;
      }
      probar();
    }
    function renderSidePhoto(containerId, idx) {
      const cont = document.getElementById(containerId);
      const val = plantas[idx];
      buscarImagen(val.archivo, (ruta) => {
        cont.innerHTML = `
          <img src="${ruta}" alt="${val.nombre}">
          <div class="plant-name">${val.nombre}</div>
          <div class="plant-energy">${val.energia}</div>
          <div class="plant-short">${val.short}</div>
        `;
      });
    }
    function changePhotos() {
      idxLeft = (idxLeft + 1) % plantas.length;
      idxRight = (idxRight + 1) % plantas.length;
      renderSidePhoto("side-photo-left", idxLeft);
      renderSidePhoto("side-photo-right", idxRight);
    }
    // Inicializaci√≥n
    renderSidePhoto("side-photo-left", idxLeft);
    renderSidePhoto("side-photo-right", idxRight);
    setInterval(changePhotos, 4000);

    // -------- FORMULARIO PERSONALIZADO --------
    const signosElementos = {
      Aries: "Fuego", Leo: "Fuego", Sagitario: "Fuego",
      Tauro: "Tierra", Virgo: "Tierra", Capricornio: "Tierra",
      G√©minis: "Aire", Libra: "Aire", Acuario: "Aire",
      C√°ncer: "Agua", Escorpio: "Agua", Piscis: "Agua"
    };
    function sugerirPlanta(respuestas) {
      const color = respuestas[4].valor?.toLowerCase();
      for (let i=0; i<plantas.length; i++) {
        if (plantas[i].energia.toLowerCase().includes(color)) return i;
        if (plantas[i].nombre.toLowerCase().includes(color)) return i;
      }
      return Math.floor(Math.random() * plantas.length);
    }
    function articuloAspecto(aspecto) {
      const femeninos = [
        "Salud", "Familia", "Creatividad", "Abundancia", "Armon√≠a", "Estabilidad",
        "Protecci√≥n", "Suavidad", "Belleza", "Resiliencia", "Comunidad",
        "Floraci√≥n", "Forma", "Energ√≠a", "Paz interior", "Ternura",
        "Percepci√≥n", "Intuici√≥n", "Autoafirmaci√≥n"
      ];
      if (aspecto === "Equilibrio emocional" || aspecto === "Crecimiento espiritual") return "el";
      if (femeninos.includes(aspecto)) return "la";
      if (aspecto === "Dinero" || aspecto === "Trabajo" || aspecto === "Amor") return "el";
      return "el";
    }
    function mensajeSorpresa(signo, aspecto, elemento, nivel, color) {
      const secretosPorSigno = {
        Aries: "En tu interior arde la chispa del primer aliento de la creaci√≥n, y tu energ√≠a es capaz de abrir caminos donde nada exist√≠a.",
        Tauro: "Tu perseverancia es ra√≠z y fruto. Lo que siembras en tu vida florece con paciencia, y tu coraz√≥n busca la belleza oculta en lo simple.",
        G√©minis: "Tu palabra es puente entre mundos. Como el viento, llevas mensajes y siembras ideas; tu misi√≥n es conectar lo disperso.",
        C√°ncer: "En tus emociones reside la memoria del alma colectiva. Eres el guardi√°n de la ternura y la intuici√≥n profunda.",
        Leo: "Tu luz es reflejo de la fuente primordial. Cuando brillas, inspiras a otros a descubrir su propio sol.",
        Virgo: "La perfecci√≥n que busc√°s es el reflejo de un orden profundo. Tu capacidad de servicio sana y purifica tu entorno.",
        Libra: "Tu alma anhela el equilibrio del universo. All√≠ donde interven√≠s, la armon√≠a se vuelve posible.",
        Escorpio: "Port√°s el secreto de la transformaci√≥n. En vos, lo oculto se revela y la sombra se convierte en poder.",
        Sagitario: "Tu mirada trasciende horizontes. Sos portador de la verdad y la expansi√≥n, flecha que apunta al sentido.",
        Capricornio: "Tu disciplina es puente entre el cielo y la tierra. Sos arquitecto de realidades y guardi√°n de la perseverancia.",
        Acuario: "Sos canal de la nueva visi√≥n. Tu originalidad siembra futuro y tu mente es manantial de libertad.",
        Piscis: "En tu sensibilidad habita la compasi√≥n universal. Donde otros ven caos, vos percib√≠s la unidad de todas las almas."
      };
      const secretosPorAspecto = {
        Amor: "El amor es la energ√≠a que sostiene la existencia. Cuando lo invoc√°s, el universo conspira a tu favor.",
        Salud: "La salud proviene del equilibrio interno. Si honr√°s tu cuerpo, el esp√≠ritu florece.",
        Dinero: "La prosperidad es el reflejo de la confianza en recibir. Abre tu mano y la abundancia fluir√°.",
        Familia: "La familia es el primer c√≠rculo sagrado. All√≠ se revela la ense√±anza del dar y el recibir.",
        Trabajo: "Tu labor es el altar donde tu alma se expresa. Cada acci√≥n consciente te acerca a tu prop√≥sito.",
        Creatividad: "La creatividad es la chispa divina en acci√≥n. Cuando cre√°s, te conect√°s con la fuente primordial.",
        "Equilibrio emocional": "El equilibrio emocional es la llave para que la energ√≠a fluya sin bloqueos. Si te escuch√°s, tu coraz√≥n se vuelve br√∫jula.",
        "Crecimiento espiritual": "El crecimiento espiritual es el viaje del alma hacia la luz. Cada paso interior es un retorno a tu origen.",
        Otro: "Aquello que busc√°s, ya est√° en tu interior. La respuesta se revela cuando te permit√≠s recibir."
      };
      const mensajeColor = {
        Verde: "El verde renueva y sana, trayendo esperanza y expansi√≥n.",
        Rojo: "El rojo despierta la pasi√≥n y da fuerza vital.",
        Naranja: "El naranja enciende la creatividad y la alegr√≠a.",
        Amarillo: "El amarillo ilumina la mente y atrae claridad.",
        Rosa: "El rosa activa la ternura y el amor incondicional.",
        Violeta: "El violeta transmuta y libera, abriendo el camino a la transformaci√≥n.",
        Azul: "El azul calma y conecta con la intuici√≥n profunda.",
        Blanco: "El blanco purifica y expande la conciencia.",
        Gris: "El gris equilibra las polaridades y aporta neutralidad.",
        Multicolor: "La mezcla de colores simboliza la integraci√≥n de todos los caminos."
      };
      const mensajeNivel = {
        F√≠sico: "Esta energ√≠a te ayudar√° a enraizar tu cuerpo.",
        Mental: "Favorecer√° la claridad de pensamiento.",
        Emocional: "Te acompa√±ar√° en el reconocimiento de tus emociones.",
        Espiritual: "Es un canal para elevar tu conciencia.",
        Todos: "Trabajar√° en todos los planos, favoreciendo la integraci√≥n total."
      };
      return `<b>Sorpresa:</b> ${secretosPorSigno[signo] || ""}<br>
      <b>Clave para tu vida:</b> ${secretosPorAspecto[aspecto] || ""}<br>
      <b>Vibraci√≥n del color:</b> ${mensajeColor[color] || ""}<br>
      <b>Nivel energ√©tico:</b> ${mensajeNivel[nivel] || ""}`;
    }
    function generarConclusion(respuestas, info) {
      const signo = respuestas[0].valor;
      const aspecto = respuestas[1].valor;
      const elemento = respuestas[2].valor;
      const buscas = respuestas[3].valor;
      const color = respuestas[4].valor;
      const nivel = respuestas[5].valor;
      const elementoZ = signosElementos[signo];
      const elementoPreferido = elemento;
      let articulo = articuloAspecto(aspecto);

      let conclusion = `<b>Lectura personalizada:</b><br><br>`;
      conclusion += `La <b>${info.nombre}</b> es una planta asociada con la energ√≠a de ${info.energia}. `;
      conclusion += `Tu signo es <b>${signo}</b> (${elementoZ}), lo que genera una interacci√≥n muy especial entre tu naturaleza y la vibraci√≥n de esta suculenta, especialmente en lo relacionado con ${articulo} ${aspecto.toLowerCase()}. `;
      if (elementoZ === elementoPreferido) {
        conclusion += `Esta afinidad elemental fortalece la sinton√≠a natural, facilitando el equilibrio y la integraci√≥n de tu energ√≠a. `;
      } else {
        conclusion += `Aunque tu signo pertenece al elemento ${elementoZ.toLowerCase()}, tu inclinaci√≥n hacia ${elementoPreferido.toLowerCase()} indica una b√∫squeda de balance complementario. `;
      }
      conclusion += `<br><br>El hecho de que busques ${buscas.toLowerCase()} y te atraiga el color ${color.toLowerCase()} sugiere que tu campo personal est√° receptivo a la vibraci√≥n espec√≠fica de esta suculenta. El color elegido act√∫a como resonador, amplificando el efecto transformador y sanador de la planta sobre tu energ√≠a. `;
      conclusion += `<br><br><b>En s√≠ntesis:</b> la <b>${info.nombre}</b> puede ayudarte a equilibrar y potenciar tu energ√≠a, actuando como un puente entre tu b√∫squeda interna y las fuerzas universales. Si la cuid√°s y te conect√°s con su presencia, contribuir√° a tu proceso de sanaci√≥n y expansi√≥n personal.<br>`;
      conclusion += `<br>Recuerda: cada planta puede ser un canal de luz y conciencia. Toda elecci√≥n consciente es un paso hacia tu plenitud.<br><br>`;
      conclusion += `<div style="margin-top:14px">${mensajeSorpresa(signo, aspecto, elemento, nivel, color)}</div>`;
      return conclusion;
    }
    function validarEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
    }
    document.getElementById('form-suculenta').addEventListener('submit', function(e) {
      e.preventDefault();
      const fd = new FormData(this);
      const respuestas = [
        { titulo: "Signo zodiacal", valor: fd.get('signo') },
        { titulo: "Aspecto de la vida que te gustar√≠a potenciar o equilibrar", valor: fd.get('vida') },
        { titulo: "Elemento con el que te identific√°s m√°s", valor: fd.get('elemento') },
        { titulo: "¬øQu√© buscas en una planta?", valor: fd.get('buscas') },
        { titulo: "Color que m√°s te atrae", valor: fd.get('color') },
        { titulo: "Nivel para trabajar tu energ√≠a", valor: fd.get('nivel') }
      ];
      // Sugerir planta
      const idxSug = sugerirPlanta(respuestas);
      const info = plantas[idxSug];
      buscarImagen(info.archivo, (rutaImagen) => {
        const cont = document.getElementById('resultado');
        const conclusion = generarConclusion(respuestas, info);
        cont.innerHTML = `
          <h2>Tu lectura personalizada</h2>
          <img src="${rutaImagen}" alt="${info.nombre}" class="big-img-plant">
          <div class="respuestas">
            <h3>Tus respuestas:</h3>
            <ul>
              ${respuestas.map(r => `<li><b>${r.titulo}:</b> ${r.valor}</li>`).join('')}
            </ul>
          </div>
          <div class="conclusion">
            ${conclusion}
          </div>
          <form id="mail-form" style="display:flex;align-items:center;gap:10px;margin-top:32px;flex-wrap:wrap;">
            <input id="mail-to" type="email" name="email" placeholder="Escrib√≠ tu e-mail" style="flex:1 1 220px;font-size:1.08em;padding:10px 14px;border-radius:7px;border:1.5px solid #cfe5d3;outline:none;background:#f8f9fa;" required>
            <button id="send-mail-btn" title="Enviar por email" type="submit" style="background:linear-gradient(90deg,#69b47c 60%,#ffb3b3 100%);border:none;border-radius:50%;padding:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #e1b7b73d;" disabled>
              <svg viewBox="0 0 24 24" width="26" height="26" style="vertical-align:middle;" fill="#fff"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
          </form>
          <div id="mail-confirm" style="margin-top:10px;color:#3080b4;font-size:1.06em;font-weight:500;"></div>
        `;
        cont.style.display = 'block';
        cont.scrollIntoView({behavior: 'smooth'});
        // --- Formspree AJAX ---
        const mailInput = document.getElementById('mail-to');
        const sendBtn = document.getElementById('send-mail-btn');
        const mailForm = document.getElementById('mail-form');
        const mailConfirm = document.getElementById('mail-confirm');
        function updateBtnState() {
          if (validarEmail(mailInput.value)) {
            sendBtn.disabled = false;
            mailInput.style.borderColor = "#69b47c";
          } else {
            sendBtn.disabled = true;
            mailInput.style.borderColor = "#fbb3b3";
          }
          mailConfirm.textContent = "";
        }
        mailInput.addEventListener('input', updateBtnState);
        mailForm.onsubmit = function(ev) {
          ev.preventDefault();
          const to = mailInput.value.trim();
          if (!validarEmail(to)) {
            mailInput.style.borderColor = "#fbb3b3";
            mailConfirm.textContent = "Por favor, escrib√≠ un e-mail v√°lido.";
            return;
          }
          sendBtn.disabled = true;
          mailConfirm.style.color = "#3080b4";
          mailConfirm.textContent = "Enviando...";
          const textRespuestas = respuestas.map(r => `${r.titulo}: ${r.valor}`).join("\n");
          const conclusionText = conclusion.replace(/<[^>]+>/g, '').replace(/\s+\n/g, '\n');
          const mensaje =
            `Resultado de mi lectura personalizada:\n\n` +
            `Planta sugerida: ${info.nombre}\n${info.short}\n\n` +
            `Mis respuestas:\n${textRespuestas}\n\n` +
            `Lectura:\n${conclusionText}\n\n¬°Gracias!`;
          fetch("https://formspree.io/f/meokgbvo", {
            method: "POST",
            headers: { "Accept": "application/json", "Content-Type": "application/json" },
            body: JSON.stringify({ email: to, message: mensaje })
          })
          .then(response => response.json())
          .then(data => {
            if(data.ok || data.success || data["next"]){
              mailConfirm.style.color = "#2e8c57";
              mailConfirm.textContent = "¬°Enviado! Revis√° tu correo üòä";
              mailInput.value = "";
            } else {
              mailConfirm.style.color = "#e04b4b";
              mailConfirm.textContent = "Ocurri√≥ un error. Intent√° de nuevo m√°s tarde.";
            }
          }).catch(() => {
            mailConfirm.style.color = "#e04b4b";
            mailConfirm.textContent = "Ocurri√≥ un error. Intent√° de nuevo m√°s tarde.";
          }).finally(()=>{sendBtn.disabled=false;});
        };
        sendBtn.disabled = true;
      });
    });
  </script>
</body>
</html>